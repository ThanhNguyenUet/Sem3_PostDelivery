<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../CSS/user_detail.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Post Delivery</title>
</head>
<body>
    <div class="navbar">
        <div class="home">
            <a href = "user_page.html" style="text-decoration: none; color : red">
            Post Delivery
            </a>
        </div>
        <div class="user" id="username">
            <i class="fa fa-user"></i> <span id="usernamePlaceholder">Username</span>
        </div>
    </div>
    <div class="title">
        <h2>User Details</h2>
    </div>
    <div class="body">
        <div class="first_column">
            <div class="fullname header">
                <p>Fullname</p>
            </div>
            <div class="address header">
                <p>Address</p>
            </div>
            <div class="phonenum header">
                <p>Phone Number</p>
            </div>
            <div class="email header">
                <p>Email</p>
            </div>
        </div>
        <div class="second_column">
            <div class="fullname info">
                <p id="userFullname">User Fullname</p>
            </div>
            <div class="address info">
                <p id="userAddress">User Address</p>
            </div>
            <div class="phonenum info">
                <p id="userPhoneNumber">User Phone Number</p>
            </div>
            <div class="email info">
                <p id="userEmail">User Email</p>
            </div>
        </div>
    </div>
</body>
<script>
     // Function to fetch user data after the page loads
     async function fetchUserData() {
            const userID = localStorage.getItem('userID');

            try {
                if (userID) {
                    // If userID is present, fetch user data
                    const response = await fetch(`http://localhost:8080/user/get/${userID}`);
                    if (response.ok) {
                        const userData = await response.json();
                        // Update the HTML with the user data
                        document.getElementById('usernamePlaceholder').innerText = userData.fullName;
                        document.getElementById('userFullname').innerText = userData.fullName ;
                        document.getElementById('userAddress').innerText = userData.address ;
                        document.getElementById('userPhoneNumber').innerText = userData.phoneNumber ;
                        document.getElementById('userEmail').innerText = userData.email;
                    } else {
                        console.error('Failed to fetch user data:', response.statusText);
                    }
                } else {
                    // If userID is not present, redirect to the login page
                    window.location.href = 'login.html';
                }
            } catch (error) {
                console.error('Error during fetchUserData:', error);
            }
        }

        // Call the function when the page loads
        window.onload = fetchUserData;
</script>
</html>